extends layout

block content
  .home-container
    h1.hero-title Discover and Own Games with NFTs
    p.hero-subtitle Buy once, own forever. Powered by blockchain.

    .featured
      h2 Featured Games
      .game-list
        .game-card
          img.game-image(src="/images/pixel-quest.jpg", alt="Pixel Quest")
          h3 Pixel Quest
          p.game-description An epic pixel art adventure game where your NFT is your license to play!
          .price-container
            span.price-label Price:
            span.price-amount Free
          button#connect-wallet-btn.btn Connect Wallet
          button#buy-btn.btn.hidden Buy Game
          #wallet-status.status-text
          #purchase-status.status-text

block scripts
  script(src="/js/web3.js")
  script.
    document.addEventListener('DOMContentLoaded', () => {
      const connectWalletBtn = document.getElementById('connect-wallet-btn');
      const buyBtn = document.getElementById('buy-btn');
      const walletStatus = document.getElementById('wallet-status');
      const purchaseStatus = document.getElementById('purchase-status');

      connectWalletBtn.addEventListener('click', async () => {
        const connected = await connectWallet();
        if (connected) {
          connectWalletBtn.classList.add('hidden');
          buyBtn.classList.remove('hidden');
        }
      });

      buyBtn.addEventListener('click', async () => {
        purchaseStatus.textContent = 'Processing purchase...';
        try {
          await purchaseGame();
          purchaseStatus.textContent = 'Successfully purchased! Check your wallet for the NFT.';
        } catch (error) {
          purchaseStatus.textContent = 'Purchase failed: ' + error.message;
        }
      });
    });
